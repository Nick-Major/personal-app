# Создаем полностью обновленный файл задач
cat > docs/TODO_FIXES.md << 'EOF'
# 🛠️ Актуальный список задач для исправления

## 📅 Состояние на: 30.10.2024

## ✅ ВЫПОЛНЕНО ЗА СЕССИЮ

### Исправления моделей:
- [x] **Упрощена модель WorkType** - только name, description, is_active
- [x] **Удалены неиспользуемые поля** из WorkType и БД
- [x] **Добавлена связь WorkType::massPersonnelReports()** 
- [x] **Исправлена модель Category** - добавлена связь workRequests()
- [x] **Обновлен CategoryResource** - добавлено поле prefix в админку

### Документация:
- [x] **Актуализирован SYSTEM_OVERVIEW.md** 
- [x] **Объединена документация WorkRequest** в один файл
- [x] **Создана документация WorkType**
- [x] **Удалены дублирующиеся файлы** документации
- [x] **Создана документация Category** - полное описание категорий и префиксов
- [x] **Создана документация Specialty** - описание специальностей и ставок
- [x] **Протестированы связи** Specialty ↔ MassPersonnelReport - работают корректно
- [x] **Подтверждена работа расчетов** - формула base_hourly_rate × total_hours
- [x] **Обновлен SYSTEM_OVERVIEW.md** - добавлен раздел о категориях и специальностях

### Данные системы:
- [x] **Установлен префикс "SA" для категории "Садовники"**
- [x] **Проверена генерация номеров заявок** - работает корректно
- [x] **Проверено соответствие моделей и БД** - все поля синхронизированы

## 🔴 КРИТИЧЕСКИЕ ЗАДАЧИ (ВЫСОКИЙ ПРИОРИТЕТ)

### 1. Настройка пользователей и ролей
- [ ] **Создать тестовых пользователей** всех ролей через админку
- [ ] **Назначить специальности пользователям** через pivot user_specialties
- [ ] **Проверить ролевой доступ** в системе

### 2. Настройка подрядчиков и ставок
- [ ] **Создать подрядчиков** с кодами через админку
- [ ] **Настроить ContractorRate** - ставки для подрядчиков по специальностям
- [ ] **Проверить расчеты для персонала подрядчиков**

### 3. Тестирование workflow
- [ ] **Создать тестовые WorkRequest** для проверки полного цикла
- [ ] **Протестировать генерацию номеров заявок** с разными сценариями
- [ ] **Проверить workflow статусов** заявок и смен

## 🟡 ЗАДАЧИ ДАННЫХ (СРЕДНИЙ ПРИОРИТЕТ)

### Категории и специальности:
- [ ] **Создать полный набор категорий** с префиксами:
  - Строители (ST)
  - Отделочники (OT) 
  - Уборщики (UB)
  - Разнорабочие (RB)
- [ ] **Создать полный набор специальностей** с базовыми ставками
- [ ] **Связать специальности с категориями**

### Виды работ:
- [ ] **Заполнить справочник WorkType** через админку
- [ ] **Проверить использование WorkType** в аналитике

## 🟢 УЛУЧШЕНИЯ (НИЗКИЙ ПРИОРИТЕТ)

### Документация:
- [ ] **Документировать API endpoints**
- [ ] **Создать документацию MassPersonnelReport**
- [ ] **Обновить документацию пользовательских ролей**

### Функциональность:
- [ ] **Протестировать MassPersonnelReport workflow**
- [ ] **Настроить фильтры и поиск** в админке
- [ ] **Оптимизировать производительность** сложных запросов

## 🔗 ПРОВЕРКА СВЯЗЕЙ (ВСЕ ВЫПОЛНЕНО ✅)

- [x] WorkRequest → Category (префиксы для номеров)
- [x] WorkRequest → Contractor (массовый персонал)  
- [x] WorkType → MassPersonnelReport (аналитика)
- [x] WorkType → WorkRequest (категоризация)
- [x] WorkType → Shift (категоризация)
- [x] Category → WorkRequest (связь добавлена)

## ⏳ ОСТАВШИЕСЯ СВЯЗИ ДЛЯ НАСТРОЙКИ

- [ ] User → Specialty (система ставок через pivot)
- [ ] Contractor → ContractorRate (ставки подрядчиков)
- [ ] Specialty → Category (иерархия)

## 🎯 БЛИЖАЙШИЕ ШАГИ

1. **Настроить пользователей** - создать тестовых пользователей всех ролей
2. **Создание категорий** с префиксами через Filament
3. **Создание специальностей** с базовыми ставками
3. **Создать тестовые заявки** - проверить полный workflow
4. **Протестировать расчеты** - проверить формулу на реальных данных

## 📊 ТЕКУЩИЙ СТАТУС СИСТЕМЫ

- **Модели**: ✅ Готовы (28 моделей)
- **Миграции**: ✅ Выполнены (64 миграции) 
- **API**: ✅ Настроен (41 endpoint)
- **Админка**: ✅ Базовая настройка завершена
- **Документация**: ✅ Основная часть завершена
- **Тестовые данные**: 🟡 Требуют наполнения
- **Workflow**: 🟡 Требует тестирования

## 💡 РЕКОМЕНДАЦИИ ПО ДАЛЬНЕЙШЕЙ РАБОТЕ

1. **Начинать с настройки пользователей** - без них система неработоспособна
2. **Поэтапно тестировать каждый модуль** перед переходом к следующему
3. **Использовать админку Filament** для создания тестовых данных
4. **Документировать найденные проблемы** сразу при обнаружении
